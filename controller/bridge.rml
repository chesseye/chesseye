open Types
open Util
let bridge s =
  try
    while true do
      let line = input_line stdin in
      begin match parse_message line with
      | MASK m -> Rml_async.safe_emit s m
      | OBST -> print_endline "OBST"
      | NOCB -> print_endline "NOCB"
      | OTHER msg -> print_endline msg
      end
    done
  with
  | _ -> ()
